@page "/demoStore"
@using Data

<h3>DemoStore</h3>

<div class="border m-2 mt-3 " style="background-color: azure">
    <h2 class="text-info">Book list</h2>

    <div class="row container">

        <div class="col-12 mt-4">
            <h4 class="text-info">Books in store</h4>
            <h5>Books selected: @selectedBooks </h5>
        </div>
        @foreach (var item in bookBlazors)
        {
            <BookItem OnBookSelectedChecked="changeCounter"  book="@item" />
        }


        <div class="col-12 mt-4">
            <h4 class="text-info">Books benefits</h4>
        </div>
        @foreach (var item in benefitsLst)
        {
            <BookBenefit benefits="@item" OnBenefitSelected="changeBenefit" />
        }

        <h5>Beneficio seleccionado: <strong>@selectedBenefit</strong></h5>
    </div>
</div>


@code {

    public int selectedBooks { get; set; } = 0;
    public string selectedBenefit { get; set; }
    List<BookBlazor> bookBlazors = new List<BookBlazor>();
    List<BookBenefits> benefitsLst = new List<BookBenefits>();
    protected override void OnInitialized()
    {
        bookBlazors.Add(new BookBlazor()
        {
            Id = 1,
            Name = "Blazor Apps Basic",
            Price = 12,
            Is_InStock = true,
            BookType = new List<BookType>
        {
                new BookType{ Id =1, Name="Programacion", Value="10"},
                new BookType{ Id =2, Name="Diseño", Value="10"},
                new BookType{ Id =3, Name="OOP", Value="10"},
                new BookType{ Id =4, Name="SOLID", Value="10"},
            }
        });

        bookBlazors.Add(new BookBlazor()
        {
            Id = 1,
            Name = "Blazor Apps Intermedium",
            Price = 12,
            Is_InStock = true,
            BookType = new List<BookType>
        {
                new BookType{ Id =1, Name="Programacion", Value="10"},
                new BookType{ Id =2, Name="Diseño", Value="10"},
                new BookType{ Id =3, Name="OOP", Value="10"},
                new BookType{ Id =4, Name="SOLID", Value="10"},
            }
        });

        bookBlazors.Add(new BookBlazor()
        {
            Id = 1,
            Name = "Blazor Apps Advance",
            Price = 12,
            Is_InStock = true,
            BookType = new List<BookType>
        {
                new BookType{ Id =1, Name="Programacion", Value="10"},
                new BookType{ Id =2, Name="Diseño", Value="10"},
                new BookType{ Id =3, Name="OOP", Value="10"},
                new BookType{ Id =4, Name="SOLID", Value="10"},
            }
        });

        benefitsLst.Add(new BookBenefits
        {
            Id = 1,
            Name = "Lorem 1",
            Description = "Lorem ipsum dolor sit amet"
        });
        benefitsLst.Add(new BookBenefits
        {
            Id = 2,
            Name = "Lorem 2",
            Description = "Lorem ipsum dolor sit amet"
        });
        benefitsLst.Add(new BookBenefits
        {
            Id = 3,
            Name = "Lorem 3",
            Description = "Lorem ipsum dolor sit amet"
        });


    }

    protected void changeCounter(bool isSelected)
    {
        if (isSelected) { selectedBooks++; } else { selectedBooks--; }
    }

    protected void changeBenefit(string benefitName)
    {
        selectedBenefit = benefitName;
    }
}
